@use "../tokens/breakpoints.scss" as bp;

/* ============================================
   Interactive Case Study Section
   ============================================

   Responsive case study gallery with hover previews.
   Two layouts: list (desktop) and cards (mobile).

   Desktop (â‰¥768px):
   - Two-column list layout (title left, description right)
   - Hover reveals centrally positioned preview image
   - Clip-path reveal animation
   - Subtle theme-aware background on hover

   Mobile (<768px):
   - Card layout with images
   - Stacked vertically
   - Touch-friendly interactions

   Theme Integration:
   - Uses CSS custom properties for colors
   - Adapts to light/dark theme automatically
   - Smooth transitions using design tokens
*/

/* ============================================
   SECTION CONTAINER
   ============================================ */

/* Main section - transparent to show parent background (FluidGradient) */
.interactive-case-study-section {
  /* Transparent - allows FluidGradient or other backgrounds to show through */
  background: transparent;
}

/* Section title */
.section-title {
  color: var(--theme-text-60);
  font-size: 1rem;
  font-weight: 400;
  letter-spacing: 0.02em;
}

/* Container for list items */
.case-study-list {
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 1;
}

/* ============================================
   DESKTOP HOVER PREVIEW
   ============================================ */

/* Preview container - absolutely positioned, centered */
.preview-container {
  /* Centered absolute positioning */
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  /* Size constraints */
  width: 50vw;
  max-width: 700px;
  aspect-ratio: 4 / 3;

  /* Non-interactive (allows clicks to pass through to list) */
  pointer-events: none;

  /* Above list items */
  z-index: 10;
}

/* Preview image with clip-path reveal animation */
.preview-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 0.5rem;

  /* Start state: fully clipped (invisible) */
  clip-path: inset(50% 50% 50% 50%);

  /* Smooth clip-path transition */
  transition: clip-path var(--duration-hover) var(--ease-power2);
}

/* Active state: fully revealed */
.preview-container.active .preview-image {
  clip-path: inset(0% 0% 0% 0%);
}

/* ============================================
   DESKTOP LIST ITEM
   ============================================ */

/* Items are nested full-width-content (inside list which is also full-width-content) */
/* Need explicit rule since content-grid.scss only handles direct children */
.full-width-content > .case-study-item.full-width-content {
  grid-column: full-width;
  display: grid !important; /* Override Tailwind md:block */
  grid-template-columns: inherit;
}

.case-study-item {
  /* Remove link styling */
  text-decoration: none;

  /* Vertical spacing - only bottom padding so border line is at top */
  padding: 0 0 1.5rem 0;

  /* Smooth background transition on hover */
  background: transparent;
  transition: background-color var(--duration-hover) var(--ease-power2);
}

.case-study-item:hover {
  /* Full-width solid background on hover (theme-aware) */
  /* Light theme: white, Dark theme: black */
  background-color: var(--theme-100);
}

/* Border line element - uses full-width class within sub-grid */
/* Higher specificity selector to override content-grid.scss default rule */
.case-study-item > .item-border-line {
  grid-column: full-width;
  height: 1px;
  background-color: color-mix(in srgb, var(--theme-text-100) 10%, transparent);
  margin-bottom: 1.5rem;
  /* Will be animated with bouncy effect later */
}

/* Content wrapper - uses breakout3 class within sub-grid */
.item-content {
  /* breakout3 class handles grid-column placement */
  /* Manual grid for internal two-column layout */
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
}

/* Left column: Title + Tag */
.item-title-col {
  display: flex;
  align-items: baseline;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.item-title {
  color: var(--theme-text-100);
}

.item-tag {
  color: var(--theme-text-60);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Right column: Description */
.item-description-col {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  text-align: right;
}

.item-description {
  color: var(--theme-text-100);
}

/* ============================================
   MOBILE CARD
   ============================================ */

.case-study-card {
  flex-direction: column;
  gap: 0.75rem; /* Reduced from 1rem */
  margin-bottom: 1.5rem; /* Reduced from 2rem */
  text-decoration: none;
  overflow: hidden;
}

/* Card image container - more compact */
.card-image-container {
  width: 100%;
  aspect-ratio: 16 / 10; /* Changed from 4/3 to 16/10 for more compact look */
  max-height: 200px; /* Limit image height on mobile */
  overflow: hidden;
  border-radius: 0.5rem;
}

.card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;

  /* Subtle scale on touch/active */
  transition: transform var(--duration-hover) var(--ease-power2);
}

.case-study-card:active .card-image {
  transform: scale(1.05);
}

/* Card content section */
.card-content {
  display: flex;
  flex-direction: column;
  gap: 0.375rem; /* Reduced from 0.5rem for more compact look */
}

/* Card header: Title + Tag */
.card-header {
  display: flex;
  align-items: baseline;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.card-title {
  color: var(--theme-text-100);
}

.card-tag {
  color: var(--theme-text-60);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.card-description {
  color: var(--theme-text-100);
}

/* ============================================
   RESPONSIVE ADJUSTMENTS
   ============================================ */

/* Desktop adjustments for larger screens */
@include bp.up(bp.$bp-lg) {
  /* Larger preview on bigger screens */
  .preview-container {
    width: 45vw;
    max-width: 800px;
  }

  /* More generous spacing */
  .case-study-item {
    padding: 0 0 2rem 0;
  }

  .item-content {
    gap: 3rem;
  }
}

/* Extra large screens */
@include bp.up(bp.$bp-2xl) {
  .item-content {
    gap: 4rem;
  }
}
